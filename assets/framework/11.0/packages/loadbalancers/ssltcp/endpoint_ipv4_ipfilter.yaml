name: endpoint_ipv4_ipfilter
tags:
  - ssltcp
  - ipv4
  - endpoint_ipfilter
sections:
  - name: trafficmanagement.loadbalancing.virtualservers
    elements:
      - name: ENDPOINT_IPV4_IPFILTER_TERMINATE_SSLTCP
        fields:
        - id: name
          data: <<prefix>>_ENDPOINT_IPV4_IPFILTER_TERMINATE_SSLTCP
        - id: servicegroup
          data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_SSLTCP/name>>
        - id: patset
          data: <<core.patternsets.appexpert.patternsets.BYPASS_LBV_IPFILTER/name>>
        expressions:
          install: |
            add lb vserver <<name>> TCP 0.0.0.0 0
            bind lb vserver <<name>> <<servicegroup>>
            bind policy patset <<patset>> <<name>>
          uninstall: |
            rm lb vserver <<name>>
            unbind policy patset <<patset>> <<name>>