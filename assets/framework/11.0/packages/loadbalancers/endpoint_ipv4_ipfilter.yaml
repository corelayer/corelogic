name: endpoint_ipv4_ipfilter
tags:
  - ipv4
  - endpoint_ipfilter
sections:
  - name: trafficmanagement.loadbalancing.virtualservers
    elements:
      - name: ENDPOINT_IPV4_IPFILTER_TERMINATE_HTTP
        fields:
        - id: name
          data: <<prefix>>_ENDPOINT_IPV4_IPFILTER_TERMINATE_HTTP
        - id: servicegroup
          data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_HTTP/name>>
        - id: patset
          data: <<core.patternsets.appexpert.patternsets.BYPASS_LBV_IPFILTER/name>>
        expressions:
          install: |
            add lb vserver <<name>> HTTP 0.0.0.0 0
            bind lb vserver <<name>> <<servicegroup>>
            bind policy patset <<patset>> <<name>>
          uninstall: |
            rm lb vserver <<name>>
            unbind policy patset <<patset>> <<name>>
      - name: ENDPOINT_IPV4_IPFILTER_TERMINATE_SSL
        fields:
        - id: name
          data: <<prefix>>_ENDPOINT_IPV4_IPFILTER_TERMINATE_SSL
        - id: servicegroup
          data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_HTTP/name>>
        - id: patset
          data: <<core.patternsets.appexpert.patternsets.BYPASS_LBV_IPFILTER/name>>
        expressions:
          install: |
            add lb vserver <<name>> HTTP 0.0.0.0 0
            bind lb vserver <<name>> <<servicegroup>>
            bind policy patset <<patset>> <<name>>
          uninstall: |
            rm lb vserver <<name>>
            unbind policy patset <<patset>> <<name>>
      - name: ENDPOINT_IPV4_IPFILTER_TERMINATE_TCP
        fields:
          - id: name
            data: <<prefix>>_ENDPOINT_IPV4_IPFILTER_TERMINATE_TCP
          - id: servicegroup
            data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_TCP/name>>
          - id: patset
            data: <<core.patternsets.appexpert.patternsets.BYPASS_LBV_IPFILTER/name>>
        expressions:
          install: |
            add lb vserver <<name>> TCP 0.0.0.0 0
            bind lb vserver <<name>> <<servicegroup>>
            bind policy patset <<patset>> <<name>>
          uninstall: |
            rm lb vserver <<name>>
            unbind policy patset <<patset>> <<name>>
      - name: ENDPOINT_IPV4_IPFILTER_TERMINATE_SSLTCP
        fields:
          - id: name
            data: <<prefix>>_ENDPOINT_IPV4_IPFILTER_TERMINATE_SSLTCP
          - id: servicegroup
            data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_TCP/name>>
          - id: patset
            data: <<core.patternsets.appexpert.patternsets.BYPASS_LBV_IPFILTER/name>>
        expressions:
          install: |
            add lb vserver <<name>> TCP 0.0.0.0 0
            bind lb vserver <<name>> <<servicegroup>>
            bind policy patset <<patset>> <<name>>
          uninstall: |
            rm lb vserver <<name>>
            unbind policy patset <<patset>> <<name>>
      - name: ENDPOINT_IPV4_IPFILTER_TERMINATE_UDP
        fields:
          - id: name
            data: <<prefix>>_ENDPOINT_IPV4_IPFILTER_TERMINATE_UDP
          - id: servicegroup
            data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_UDP/name>>
          - id: patset
            data: <<core.patternsets.appexpert.patternsets.BYPASS_LBV_IPFILTER/name>>
        expressions:
          install: |
            add lb vserver <<name>> UDP 0.0.0.0 0
            bind lb vserver <<name>> <<servicegroup>>
            bind policy patset <<patset>> <<name>>
          uninstall: |
            rm lb vserver <<name>>
            unbind policy patset <<patset>> <<name>>
