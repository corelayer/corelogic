name: servicegroups
tags:
  - http
  - core
sections:
  - name: trafficmanagement.loadbalancing.servicegroups
    elements:
      - name: DUMMY_HTTP
        fields:
          - id: name
            data: <<prefix>>_DUMMY_HTTP
          - id: type
            data: HTTP
          - id: server
            data: <<core.servers.trafficmanagement.loadbalancing.servers.DUMMY/name>>
        expressions:
          install: add servicegroup <<name>> <<type>> -healthMonitor NO
          uninstall: rm servicegroup <<name>>


  - name: trafficmanagement.loadbalancing.servicegroupbindings
    elements:
      - name: DUMMY_HTTP
        fields:
          - id: name
            data: <<prefix>>_DUMMY_HTTP
          - id: servicegroup
            data: <<core.servicegroups.trafficmanagement.loadbalancing.servicegroups.DUMMY_HTTP/name>>
          - id: server
            data: <<core.servers.trafficmanagement.loadbalancing.servers.DUMMY/name>>
        expressions:
          install: bind servicegroup <<servicegroup>> <<server>> *
          uninstall: unbind servicegroup <<servicegroup>> <server>> *